"use strict";(self.webpackChunkcommunity_ai=self.webpackChunkcommunity_ai||[]).push([[120],{2737:function(e,s,a){a.r(s),a.d(s,{default:function(){return v}});var i=a(1413),l=a(4165),r=a(5861),t=a(885),n=a(2791),o=a(6871),c=a(4153),m=a(3504),d=a(1795),u=a(5005),f=a(7256),h=a(4059),x=a(184),b=c.Ry().shape({email:c.Z_().email("Wrong email format").min(5,"Minimum 5 characters").max(50,"Maximum 50 characters").required("Email is required"),role:c.Z_().min(1,"Minimum 1 characters").max(1,"Maximum 1 characters").required("Password is required")}),p={email:"",role:""};function v(){var e=(0,n.useState)(!1),s=(0,t.Z)(e,2),a=s[0],c=s[1],v=(0,f.aC)(),g=v.currentUser,j=v.auth,N=(0,o.s0)(),w=(0,n.useState)(!1),y=(0,t.Z)(w,2),k=y[0],S=y[1],Z=(0,n.useState)(""),_=(0,t.Z)(Z,2),U=_[0],q=_[1],C=(0,n.useState)(""),F=(0,t.Z)(C,2),M=F[0],T=F[1];(0,n.useEffect)((function(){var e;1!=(null===j||void 0===j||null===(e=j.user)||void 0===e?void 0:e.role)&&N("/error/500")}),[]),""!==U&&setTimeout((function(){S(!1),setTimeout((function(){q("")}),200)}),5e3),""!==M&&setTimeout((function(){S(!1),setTimeout((function(){T("")}),200)}),5e3);var V=(0,d.TA)({initialValues:p,validationSchema:b,onSubmit:function(){var e=(0,r.Z)((0,l.Z)().mark((function e(s,a){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setStatus,a.setSubmitting,c(!0),(0,u.X7)(null===g||void 0===g?void 0:g.id,s.email,s.role,null===g||void 0===g?void 0:g.companyId).then((function(e){e.data.success?(q(e.data.message),S(!0),c(!1)):(T(e.data.message),S(!0),c(!1))})).catch((function(e){T("Failed to send invitation"),S(!0),c(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(s,a){return e.apply(this,arguments)}}()});return(0,x.jsx)("div",{className:"d-flex flex-center flex-column flex-column-fluid p-10 pb-lg-20",children:(0,x.jsx)("div",{className:"w-lg-500px bg-body rounded shadow-sm p-10 p-lg-15 mx-auto",children:(0,x.jsxs)("form",{className:"form w-100",onSubmit:V.handleSubmit,noValidate:!0,children:[(0,x.jsx)("div",{className:"text-center mb-11",children:(0,x.jsx)("h1",{className:"text-dark fw-bolder mb-3",children:"Invite Users"})}),""!==U?(0,x.jsx)(h.FP,{message:U,checked:k}):null,""!==M?(0,x.jsx)(h.Nq,{message:M,checked:k}):null,(0,x.jsxs)("div",{className:"fv-row mb-8",children:[(0,x.jsx)("label",{className:"form-label fs-6 fw-bolder text-dark",children:"User Email"}),(0,x.jsx)("input",(0,i.Z)((0,i.Z)({placeholder:"Email"},V.getFieldProps("email")),{},{className:"form-control bg-transparent",type:"email",name:"email",autoComplete:"off"})),V.touched.email&&V.errors.email&&(0,x.jsx)("div",{className:"fv-plugins-message-container",children:(0,x.jsx)("span",{role:"alert",children:V.errors.email})})]}),(0,x.jsxs)("div",{className:"fv-row mb-8",children:[(0,x.jsx)("label",{className:"form-label fw-bolder text-dark fs-6",children:"User Role"}),(0,x.jsxs)("select",{value:V.getFieldMeta("role").value,onChange:function(e){return s=e,void V.setFieldValue("role",s.target.value);var s},className:"form-select form-select-lg form-select-solid",name:"roles",children:[(0,x.jsx)("option",{value:"",children:"Select a role"}),(0,x.jsx)("option",{value:"3",children:"View Only"}),(0,x.jsx)("option",{value:"2",children:"User"}),(0,x.jsx)("option",{value:"1",children:"Administrator"})]})]}),(0,x.jsxs)("div",{className:"d-grid mb-10",children:[(0,x.jsxs)("button",{type:"submit",className:"btn btn-primary",disabled:V.isSubmitting||!V.isValid||a,children:[!a&&(0,x.jsx)("span",{className:"indicator-label",children:"Invite User"}),a&&(0,x.jsxs)("span",{className:"indicator-progress",style:{display:"block"},children:["Inviting...",(0,x.jsx)("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]})]}),(0,x.jsx)(m.rU,{to:"/manage-users",children:(0,x.jsx)("button",{type:"button",id:"kt_login_signup_form_cancel_button",className:"mt-5 btn btn-lg btn-light-primary w-100 mb-5",children:"Back"})})]})]})})})}}}]);
//# sourceMappingURL=120.3f9062dc.chunk.js.map